const ss = require('string-similarity');

const PRODUCTS = [
  'PICHET GUINNESS',
  'METRE GUINNESS',
  'DUVEL',
  'CORONA',
  'PIETRA',
  'DESPERADOS',
  'PERRIER',
  'COCA-COLA',
  'ICE TEA PECHE',
  'FANTA ORANGE',
  'ORANGINA',
  'SCHWEPPES AGRUMES',
  'RED BULL',
  'PINTE DE SIROP',
  'PICHET DE SIROP',
  'GRAND CAFE',
  'THE',
  'CHOCOLAT',
  'CHUPA CHUPS',
  'CARTE K-FET',
  'PETIT CAFE',
  'SKOLL',
  'HARIBO',
  'CIDRE LOIC RAISON',
  'DEMI CHOUFFE BLONDE',
  'SERIEUX CHOUFFE BLONDE',
  'PICHET CHOUFFE BLONDE',
  'METRE CHOUFFE BLONDE',
  'CHOUFFE BOUTEILLE',
  'CONSIGNE',
  'COTISATION',
  'FÛT CHOUFFE BLONDE',
  'FÛT GUINNESS',
  'CUVEE DES TROLLS',
  'KWAK',
  'ROCHEFORT',
  'DEMI JUPILER',
  'PINTE JUPILER',
  'METRE JUPILER',
  'DEMI LEFFE BLONDE',
  'PINTE LEFFE BLONDE',
  'PICHET LEFFE BLONDE',
  'METRE LEFFE BLONDE',
  'DELIRIUM',
  'PICHET LEFFE BRUNE',
  'DEMI LEFFE BRUNE',
  'PINTE LEFFE BRUNE',
  'METRE LEFFE BRUNE',
  'PICHET HOEGAARDEN',
  'DEMI HOEGAARDEN',
  'PINTE HOEGAARDEN',
  'METRE HOEGAARDEN',
  'FUT LEFFE BRUNE',
  'FUT LEFFE BLONDE',
  'FUT JUPILER',
  'FUT HOEGAARGEN',
  'MAREDSOUS TRIPLE',
  'DEMI LEFFE RUBY',
  'FUT LEFFE RUBY',
  'PINTE LEFFE RUBY',
  'PICHET LEFFE RUBY',
  'METRE LEFFE RUBY',
  'FUT NINKA TRIPLE',
  'DEMI LEFFE BLONDE',
  'DEMI NINKA TRIPLE',
  'PINTE NINKA TRIPLE',
  'PICHET NINKA TRIPLE',
  'METRE NINKA TRIPLE',
  'FUT NINKA FIPA',
  'DEMI NINKA FIPA',
  'PINTE NINKA FIPA',
  'PICHET NINKA FIPA',
  'METRE NINKA FIPA',
  'SIROP BANANE',
  'SIROP CASSIS',
  'SIROP CERISE',
  'SIROP CHATAIGNE',
  'SIROP CITRON',
  'SIROP FRAISE',
  'SIROP FRAMBOISE',
  'SIROP GRENADINE',
  'SIROP KIWI',
  'SIROP MANGUE',
  'SIROP MENTHE',
  'SIROP MURE',
  'SIROP ORANGE',
  'SIROP PAMPLEMOUSSE ROSE',
  'SIROP PECHE',
  'SIROP POMME',
  'SIROP FRUIT PASSION',
  'TUBE GAZ CO2',
  'TUBE GAZ AZOTE',
  'CHIPS LAY\'S BBQ',
  'CHIPS LAY\'S BOLOGNAISE',
  'CHIPS LAY\'S SEL NATURE',
  'CHIPS LAY\'S POULET',
  'DEMI GUINNESS',
  'BOUTEILLE ROUGE',
  'BOUTEILLE BLANC',
  'BOUTEILLE ROSÉ',
  'JETON K-FET',
  'VERRE ROUGE',
  'VERRE ROSÉ',
  'VERRE BLANC',
  'FUT NINKA AMBRÉE',
  'METRE NINKA AMBRÉE',
  'PICHET NINKA AMBRÉE',
  'PINTE NINKA AMBRÉE',
  'DEMI NINKA AMBRÉE',
  'CHOCOLATS EN POUDRE',
  'CAFÉ LAVAZZA',
  'SUCRE LAVAZZA 2,8KG',
  'RINCE COCHON',
  'CHIMAY ROUGE',
  'FUT NINKA NOEL',
  'DEMI NINKA NOEL',
  'PINTE NINKA NOEL',
  'PICHET NINKA NOEL',
  'METRE NINKA NOEL',
  'PICHET JUPILER',
  'SERIEUX GUINNESS',
  'FÛT TRIPEL K',
  'METRE TRIPEL K',
  'PICHET TRIPEL K',
  'PINTE TRIPEL K',
  'DEMI TRIPEL K',
  'KASTEEL ROUGE',
  'OKTO BIERE BOUTEILLE',
  'CUBANISTO',
  'BOUTEILLE NINKA NOIRE',
  'FÛT CHOUFFE SOLEIL',
  'DEMI CHOUFFE SPE',
  'SERIEUX CHOUFFE SPE',
  'PICHET CHOUFFE SPE',
  'METRE CHOUFFE SPE',
  'SERIEUX NICE CHOUFFE',
  'DEMI NICE CHOUFFE',
  'FUT NINKASI',
  'METRE NINKASI',
  'PICHET NINKASI',
  'PINTE NINKASI',
  'DEMI NINKASI',
  'HEINEKEN 0%',
  'CARTE VA',
  'FUT NINKA SAISON',
  'METRE NINKA SAISON',
  'PICHET NINKA SAISON',
  'PINTE NINKA SAISON',
  'DEMI NINKA SAISON',
  'BURGER FRITES',
  'WHITE NOISE',
  'NINE INCH ALE',
  'KILT\' EM ALL',
  'BOTTLE OF SMOKE',
  'DEMI SOFT',
  'PINTE SOFT',
  'ECO-CUP',
  'DECONSIGNE',
  'BOUTEILLE MOUSSEUX',
  'BOUTEILLE CHAMPAGNE',
  'MAGNUM CHAMPAGNE',
  'ENORME TEILLE DE CREMANT',
  'JUP 1',
  'JUP 2',
  'JUP 3',
  'JUP 4',
  'JUP 5',
  'JUP 6',
  'KKK 1',
  'SAISON 1',
  'SAISON 2',
  'KKK 2',
  'SAISON 3',
  'KKK 3',
  'SAISON 4',
  'KKK 4',
  'SAISON 5',
  'SAISON 6',
  'KKK 5',
  'IPA 1',
  'KKK 6',
  'IPA 2',
  'IPA 3',
  'IPA 4',
  'RUBY 1',
  'IPA 5',
  'RUBY 2',
  'IPA 6',
  'RUBY 3',
  'AMBREE 1',
  'RUBY 4',
  'AMBREE 2',
  'RUBY 5',
  'AMBREE 3',
  'RUBY 6',
  'AMBREE 4',
  'LFF BL 1',
  'LFF BL 2',
  'LFF BL 3',
  'LFF BL 4',
  'LFF BL 5',
  'LFF BL 6',
  'AMBREE 5',
  'GUIN 1',
  'AMBREE 6',
  'GUIN 2',
  'GUIN 3',
  'GUIN 4',
  'GUIN 5',
  'GUIN 6',
  'HOEG 1',
  'HOEG 2',
  'PICHET HOEGAARDEN',
  'HOEG 3',
  'HOEG 4',
  'HOEG 5',
  'HOEG 6',
  'CARTE PERDUE',
  'KOMMUNION',
  'PINTE PAULANER',
  'FUT KARNA',
  'METRE KARNA',
  'PINTE KARNA',
  'DEMI KARNA',
  'PICHET KARNA',
  'PACK AP',
  'NINKA NOIRE',
  '4 SKOLL',
  'PAIX DIEU',
  'HAPKIN',
  'CINEY BRUNE',
  'LAGUNITAS',
  'MORT SUBITE GUEUZE',
  'MORT SUBITE WITTE',
  'MORT SUBITE KRIEK',
  'GOOSE ISLAND',
  'CHIPS LAY\'S SEL NATURE',
  '3D',
  'TUC',
  'CACAHUETTES',
  'NACHOS',
  'GUACAMOLE',
  'NACHOS + GUACAMOLE',
  'BOUTEILLE LIMONADE',
  'PINTE DE MONACO',
  'VIN CHAUD',
  '6 VIN CHAUD',
  'EXALTO + NINKASI',
  'NINKASI OU EXALTO',
];

function normalizeName(name) {
  return name
    .toLocaleLowerCase()
    .normalize('NFD')
    .replace(/[\u0300-\u036f]/g, '');
}

/**
 * Find the corresponding K-App product id
 *
 * @param name {string} KeziaII article name
 * @return {string|null} Matching product or null
 */
function getCorrespondingProduct(name) {
  const normalizedName = normalizeName(name);
  const productsName = PRODUCTS.map(normalizeName);

  const { rating, target } = ss.findBestMatch(normalizedName, productsName).bestMatch;

  return { rating, target };
}

const name = 'BOLO';

console.log(`Corresponding product for '${name}' is `, getCorrespondingProduct(name));
